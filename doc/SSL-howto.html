<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head><title></title></head>
<body>
<h1>SSL step-by-step uHowto</h1>

<h2>1.- Locate CA.pl or CA.sh</h2>
In Debian GNU/Linux are located in /usr/lib/ssl/misc/

<h2>2.- Create a new CA:</h2>
<pre>
$ <b>/usr/lib/ssl/misc/CA.pl -newca</b>
CA certificate filename (or enter to create) <b>&lt;press enter&gt;</b>

Making CA certificate ...
Generating a 1024 bit RSA private key
.............++++++
.......................................++++++
writing new private key to './demoCA/private/cakey.pem'
Enter PEM pass phrase: <b>&lt;type the secret phrase again&gt;</b>
Verifying - Enter PEM pass phrase: <b>&lt;type the secret phrase again&gt;</b>
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:<b>ES</b>
State or Province Name (full name) [Some-State]:<b>.</b>
Locality Name (eg, city) []:<b>.</b>
Organization Name (eg, company) [Internet Widgits Pty Ltd]:<b>Cherokee Team</b>
Organizational Unit Name (eg, section) []:<b>&lt;Enter&gt;</b>
Common Name (eg, YOUR name) []:<b>Cherokee Certificate Master</b>
Email Address []:<b>alvaro@alobbs.com</b>
</pre>

<h2>3.- Generate a certificate request</h2>
<pre>
$ <b>/usr/lib/ssl/misc/CA.pl -newreq</b>
Generating a 1024 bit RSA private key
.....................................++++++
...++++++
writing new private key to 'newreq.pem'
Enter PEM pass phrase: <b>&lt;anothe phrase&gt;</b>
Verifying - Enter PEM pass phrase: <b>&lt;repeat it&gt;</b>
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:<b>ES</b>
State or Province Name (full name) [Some-State]:<b>.</b>
Locality Name (eg, city) []:<b>.</b>
Organization Name (eg, company) [Internet Widgits Pty Ltd]:<b>alo bbs</b>
Organizational Unit Name (eg, section) []:<b>.</b>
Common Name (eg, YOUR name) []:<b>www.alobbs.com</b>
Email Address []:<b>sysop@alobbs.com</b>

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []: <b>&lt;Enter&gt;</b>
An optional company name []: <b>&lt;Enter&gt;</b>
Request (and private key) is in newreq.pem
</pre>

<h2>4.- Sign the certificate request</h2>
<pre>
$ <b>/usr/lib/ssl/misc/CA.pl -sign</b>
Using configuration from /usr/lib/ssl/openssl.cnf
Enter pass phrase for ./demoCA/private/cakey.pem:
Check that the request matches the signature
Signature ok
Certificate Details:
        Serial Number: 1 (0x1)
        Validity
            Not Before: Aug 17 13:12:44 2003 GMT
            Not After : Aug 16 13:12:44 2004 GMT
        Subject:
            countryName               = ES
            organizationName          = alo bbs
            commonName                = www.alobbs.com
            emailAddress              = sysop@alobbs.com
        X509v3 extensions:
            X509v3 Basic Constraints: 
            CA:FALSE
            Netscape Comment: 
            OpenSSL Generated Certificate
            X509v3 Subject Key Identifier: 
            14:6A:45:66:A2:EB:73:74:5A:C5:68:80:50:D5:48:94:DD:ED:25:F7
            X509v3 Authority Key Identifier: 
            keyid:9E:E0:E2:6E:1B:02:17:F2:72:C9:0D:E3:DA:C9:E1:8F:CE:BC:6E:A2
            DirName:/C=ES/ST=Madrid/L=Madrid/O=Cherokee Team/CN=Cherokee Certificate Master/emailAddress=alvaro@alobbs.com
            serial:00

Certificate is to be certified until Aug 16 13:12:44 2004 GMT (365 days)
Sign the certificate? [y/n]:<b>y</b>


1 out of 1 certificate requests certified, commit? [y/n]<b>y</b>
Write out database with 1 new entries
Data Base Updated
Signed certificate is in newcert.pem
</pre>
<br><br>

<h1>Self signed certificates</h1>
It's another way to generate certificate files:<br>
<a href="mailto:rpons@rinu.org">Ramon Pons</a> reported how to create self signed certificates:
<br>
<pre>
#!/bin/sh                                                                                                          

CERTNAME=cherokee.pem
openssl req -days 1000 -new -x509 -nodes -out $CERTNAME -keyout $CERTNAME
chmod 600 $CERTNAME
openssl verify $CERTNAME
if [ $? != 0 ]; then
     \mv $CERTNAME $CERTNAME.not_valid
fi
</pre>


<br><hr>
<div align="right">
<i>Alvaro Lopez Ortega</i><br>
<a href="mailto:alvaro@alobbs.com">alvaro@alobbs.com</a>
</div>

</body>
</html>